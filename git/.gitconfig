# in the files listed in the `path =` snippets below, define a `user` section like:
# [user]
#     name = Stuart Mashaal
#     email = <email address>
[include] # always try to default to flourish git credentials
    path = ~/flourish/.gitconfig
[includeIf "gitdir:~/me/code/"]
    path = ~/me/code/.gitconfig
[includeIf "gitdir:~/me/obsidian_vault_stumash/"]
    path = ~/me/code/.gitconfig
[includeIf "gitdir:~/dotfiles/"]
    path = ~/me/code/.gitconfig

# ssh instead of https by default
[url "ssh://git@github.com/"]
  insteadOf = https://github.com/

[push]
    default = current
[pull]
    default = current
[alias]
    cm = commit
    cmm = commit -m
    a = add
    aa = add -A
    aacm = !git add -A && git commit
    aacmm = !git add -A && git commit -m
    f = fetch
    fa = fetch --all
    bc = branch --show-current
    b = "!function g_b() { if [ -n \"$1\" ]; then git branch | rg \"$1\" | fzf -1 | choose -1; else git branch; fi }; g_b"
    ba = "!function g_ba() { if [ -n \"$1\" ]; then git branch --all | rg \"$1\" | fzf -1 | choose -1; else git branch --all; fi }; g_ba"
    bd = branch -d
    bda = "!function g_bda() { git branch | rg -v '\\*|master|main|qa|dev|uat' | xargs git branch -d; }; g_bda" # delete extra branches
    bdA = "!function g_bdA() { git branch | rg -v '\\*|master|main|qa|dev|uat' | xargs git branch -D; }; g_bdA" # force-delete extra branches
    bD = branch -D
    bn = switch -c
    co = clone
    ce = clean
    chm = switch master
    ch = "!function gchg() { git switch $(git branch | rg \"$1\" | fzf -1 | choose -1); }; gchg"
    cha = "!function gchga() { git switch $(git branch -a | sd 'remotes/[^/]+/' '' | rg \"$1\" | sort | uniq | fzf -1 | choose -1); }; gchga"
    ls = ls-files
    s = status
    su = ls-files --others --exclude-standard # untracked files that would appear in status
    sS = stash push --include-untracked
    ss = stash push
    sss = stash save --staged
    sa = stash apply
    san = "!function gsan() { git stash apply stash@{\"$1\"}; }; gsan"
    sp = stash pop
    spn = "!function gspn() { git stash pop stash@{\"$1\"}; }; gspn"
    sd = stash drop
    sda = stash clear
    sl = stash list
    lg = !git-graph -n 15
    lga = !git-graph
    lgi = !git-igitt
    d = diff
    dc = diff --cached
    dm = diff master
    dw = diff --word-diff
    dn = diff --name-only
    dcn = diff --cached --name-only
    dmn = diff --name-only master
    ps = push
    pl = pull
    i = init
    rs = reset
    rsh = reset --hard
    rsc = reset --cached
    mm = merge master
    m = "!function mg() { git merge $(git branch | rg \"$1\" | fzf -1 | choose -1); }; mg"
[diff]
    algorithm = patience

[delta]
    features = decorations
    line-numbers = true
    max-line-length = 0 # lines occupy full terminal width
[delta "interactive"]
    keep-plus-minus-markers = false
[delta "decorations"]
    commit-decoration-style = blue ol
    commit-style = raw
    file-style = omit
    hunk-header-decoration-style = blue box
    hunk-header-file-style = red
    hunk-header-line-number-style = "#067a00"
    hunk-header-style = file line-number syntax

[pager]
    diff = delta
    log = delta
    reflog = delta
    show = delta
[interactive]
    diffFilter = delta --color-only --features=interactive
[color]
    ui = true
[filter "lfs"]
	clean = git-lfs clean -- %f
	smudge = git-lfs smudge -- %f
	process = git-lfs filter-process
	required = true
